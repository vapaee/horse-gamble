<div class="p-races">
    <div class="p-races__title">
        Races
    </div>
    <div class="p-races__subtitle">
        Live Races (Excludes Completed)
    </div>

    <app-expandable-group class="p-races__group">
        <app-expandable
            class="p-races__expandable"
            *ngFor="let raceId of visibleRaceIds"
            [expandableId]="'race-' + raceId"
        >
            <!-- Closed Header -->
            <div closedHeader class="p-races__header">
                <strong>Race #{{ raceId }}</strong> –
                {{ getDistance(raceId) }}m –
                <ng-container *ngIf="countdowns[raceId] > 0; else liveLabel">
                    ⏱ {{ countdowns[raceId] }}s
                </ng-container>
                <ng-template #liveLabel>
                    <span class="p-races__live-label">LIVE</span>
                </ng-template>
            </div>

            <!-- Open Header -->
            <div openHeader class="p-races__header p-races__header--open">
                <strong>Race #{{ raceId }}</strong> –
                {{ getDistance(raceId) }}m –
                <ng-container *ngIf="countdowns[raceId] > 0; else liveLabel">
                    ⏱ {{ countdowns[raceId] }}s
                </ng-container>
                <ng-template #liveLabel>
                    <span class="p-races__live-label">LIVE</span>
                </ng-template>
            </div>

            <!-- Body -->
            <div body>
                <app-ongoing-race [raceId]="raceId"></app-ongoing-race>
            </div>
        </app-expandable>
    </app-expandable-group>
</div>
